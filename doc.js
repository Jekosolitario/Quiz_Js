const domandeAnimali = [
  {
    domanda: "Qual è il mammifero più grande del mondo?",
    risposte: ["Balenottera azzurra", "Elefante", "Orso polare", "Rinoceronte"],
    corretta: "Balenottera azzurra"
  },
  {
    domanda: "Qual è l'animale terrestre più veloce?",
    risposte: ["Ghepardo", "Leone", "Antilope", "Cavallo da corsa"],
    corretta: "Ghepardo"
  },
  {
    domanda: "Qual è l'animale più longevo?",
    risposte: ["Tartaruga delle Galápagos", "Elefante", "Balena", "Aquila reale"],
    corretta: "Tartaruga delle Galápagos"
  },
  {
    domanda: "Qual è l'animale più intelligente?",
    risposte: ["Delfino", "Cane", "Scimpanzé", "Polpo"],
    corretta: "Delfino"
  },
  {
    domanda: "Qual è l'animale più velenoso?",
    risposte: ["Rana dorata", "Vedova nera", "Cobra reale", "Scorpione"],
    corretta: "Rana dorata"
  },
  {
    domanda: "Quanti nasi hanno le lumache?",
    risposte: ["Quattro", "Due", "Uno", "Sei"],
    corretta: "Quattro"
  },
  {
    domanda: "Perché i fenicotteri sono rosa?",
    risposte: ["Perché mangiano crostacei", "Per l'acqua salata", "Per il sole", "Perché nascono così"],
    corretta: "Perché mangiano crostacei"
  },
  {
    domanda: "Qual è l'animale terrestre più grande?",
    risposte: ["Elefante africano", "Giraffa", "Rinoceronte bianco", "Ippopotamo"],
    corretta: "Elefante africano"
  },
  {
    domanda: "Dove vive l’ornitorinco?",
    risposte: ["In Australia e Tasmania", "In Canada", "In Sudafrica", "In Brasile"],
    corretta: "In Australia e Tasmania"
  },
  {
    domanda: "Di cosa si nutre principalmente il panda?",
    risposte: ["Bambù", "Insetti", "Frutta", "Foglie di tè"],
    corretta: "Bambù"
  }
];

const domandeCinema = [
  {
    domanda: "Chi ha diretto il film 'Titanic'?",
    risposte: ["James Cameron", "Steven Spielberg", "Christopher Nolan", "Martin Scorsese"],
    corretta: "James Cameron"
  },
  {
    domanda: "Chi interpreta il personaggio di Jack Sparrow in 'Pirati dei Caraibi'?",
    risposte: ["Johnny Depp", "Brad Pitt", "Leonardo DiCaprio", "Tom Hanks"],
    corretta: "Johnny Depp"
  },
  {
    domanda: "Quale film ha vinto l'Oscar come miglior film nel 2020?",
    risposte: ["Parasite", "1917", "Joker", "C'era una volta a... Hollywood"],
    corretta: "Parasite"
  },
  {
    domanda: "Qual è il vero nome dell’attore che interpreta Harry Potter?",
    risposte: ["Daniel Radcliffe", "Rupert Grint", "Elijah Wood", "Tom Holland"],
    corretta: "Daniel Radcliffe"
  },
  {
    domanda: "In quale film troviamo la frase 'Che la forza sia con te'?",
    risposte: ["Star Wars", "Matrix", "Star Trek", "Avatar"],
    corretta: "Star Wars"
  },
  {
    domanda: "Qual è il nome del regista italiano di 'La vita è bella'?",
    risposte: ["Roberto Benigni", "Paolo Sorrentino", "Gabriele Muccino", "Matteo Garrone"],
    corretta: "Roberto Benigni"
  },
  {
    domanda: "Chi ha composto la colonna sonora de 'Il Re Leone' (1994)?",
    risposte: ["Hans Zimmer", "John Williams", "Ennio Morricone", "Alan Silvestri"],
    corretta: "Hans Zimmer"
  },
  {
    domanda: "Quale film Disney ha come protagonista una principessa chiamata Moana?",
    risposte: ["Oceania", "Frozen", "Raya e l'ultimo drago", "Rapunzel"],
    corretta: "Oceania"
  },
  {
    domanda: "Chi ha interpretato il Joker in 'Il cavaliere oscuro' del 2008?",
    risposte: ["Heath Ledger", "Joaquin Phoenix", "Jared Leto", "Christian Bale"],
    corretta: "Heath Ledger"
  },
  {
    domanda: "In che anno è uscito il primo film della saga di 'Harry Potter'?",
    risposte: ["2001", "1999", "2003", "2005"],
    corretta: "2001"
  }
];

const domandeSport = [
  {
    domanda: "Quanti minuti dura una partita di calcio regolamentare?",
    risposte: ["90 minuti", "80 minuti", "60 minuti", "100 minuti"],
    corretta: "90 minuti"
  },
  {
    domanda: "In quale sport si usa la racchetta e la pallina ma non si gioca su un campo verde?",
    risposte: ["Tennis da tavolo", "Baseball", "Tennis su prato", "Pallamano"],
    corretta: "Tennis da tavolo"
  },
  {
    domanda: "Chi ha vinto più titoli di Formula 1 nella storia?",
    risposte: ["Lewis Hamilton", "Michael Schumacher", "Ayrton Senna", "Sebastian Vettel"],
    corretta: "Lewis Hamilton"
  },
  {
    domanda: "In quale città si sono svolte le Olimpiadi del 2021?",
    risposte: ["Tokyo", "Pechino", "Rio de Janeiro", "Parigi"],
    corretta: "Tokyo"
  },
  {
    domanda: "Quanti anelli ci sono nel simbolo delle Olimpiadi?",
    risposte: ["Cinque", "Sei", "Quattro", "Sette"],
    corretta: "Cinque"
  },
  {
    domanda: "Qual è lo sport nazionale del Giappone?",
    risposte: ["Sumo", "Karate", "Judo", "Baseball"],
    corretta: "Sumo"
  },
  {
    domanda: "In che sport si eseguono 'slam dunk'?",
    risposte: ["Basket", "Rugby", "Pallavolo", "Calcio"],
    corretta: "Basket"
  },
  {
    domanda: "Chi è conosciuto come 'il re del calcio'?",
    risposte: ["Pelé", "Maradona", "Messi", "Cristiano Ronaldo"],
    corretta: "Pelé"
  },
  {
    domanda: "Come si chiama il campo da gioco nel baseball?",
    risposte: ["Diamante", "Parallelogramma", "Anello", "Rettangolo"],
    corretta: "Diamante"
  },
  {
    domanda: "Quanti giocatori ci sono in campo in una squadra di pallavolo?",
    risposte: ["6", "5", "7", "11"],
    corretta: "6"
  }
];

const domandeGeografia = [
  {
    domanda: "Qual è il continente con il maggior numero di stati?",
    risposte: ["Africa", "Asia", "Europa", "America"],
    corretta: "Africa"
  },
  {
    domanda: "Qual è il fiume più lungo del mondo?",
    risposte: ["Nilo", "Amazzoni", "Yangtze", "Mississippi"],
    corretta: "Amazzoni"
  },
  {
    domanda: "In quale paese si trova il Monte Fuji?",
    risposte: ["Giappone", "Cina", "Nepal", "Corea del Sud"],
    corretta: "Giappone"
  },
  {
    domanda: "Qual è la capitale del Canada?",
    risposte: ["Ottawa", "Toronto", "Vancouver", "Montreal"],
    corretta: "Ottawa"
  },
  {
    domanda: "Quante regioni ha l'Italia?",
    risposte: ["20", "18", "22", "21"],
    corretta: "20"
  },
  {
    domanda: "Qual è l’oceano più grande?",
    risposte: ["Oceano Pacifico", "Oceano Atlantico", "Oceano Indiano", "Oceano Artico"],
    corretta: "Oceano Pacifico"
  },
  {
    domanda: "Qual è il deserto più esteso del mondo?",
    risposte: ["Antartide", "Sahara", "Gobi", "Kalahari"],
    corretta: "Antartide"
  },
  {
    domanda: "In quale nazione si trovano le cascate del Niagara?",
    risposte: ["Stati Uniti e Canada", "Solo Canada", "Solo Stati Uniti", "Messico"],
    corretta: "Stati Uniti e Canada"
  },
  {
    domanda: "Quale isola è anche uno stato?",
    risposte: ["Islanda", "Groenlandia", "Madagascar", "Cipro"],
    corretta: "Islanda"
  },
  {
    domanda: "Qual è la capitale dell’India?",
    risposte: ["Nuova Delhi", "Mumbai", "Calcutta", "Hyderabad"],
    corretta: "Nuova Delhi"
  }
];

const domandeStoria = [
  {
    domanda: "In che anno è iniziata la Seconda Guerra Mondiale?",
    risposte: ["1939", "1945", "1914", "1929"],
    corretta: "1939"
  },
  {
    domanda: "Chi era Giulio Cesare?",
    risposte: ["Un generale romano", "Un re egizio", "Un imperatore cinese", "Un filosofo greco"],
    corretta: "Un generale romano"
  },
  {
    domanda: "Quando è stata scoperta l’America da Cristoforo Colombo?",
    risposte: ["1492", "1500", "1478", "1602"],
    corretta: "1492"
  },
  {
    domanda: "Chi era il leader della Germania nazista?",
    risposte: ["Adolf Hitler", "Benito Mussolini", "Winston Churchill", "Joseph Stalin"],
    corretta: "Adolf Hitler"
  },
  {
    domanda: "Quale civiltà ha costruito le piramidi di Giza?",
    risposte: ["Egizi", "Maya", "Inca", "Romani"],
    corretta: "Egizi"
  },
  {
    domanda: "Chi ha dipinto l’Ultima Cena?",
    risposte: ["Leonardo da Vinci", "Michelangelo", "Raffaello", "Caravaggio"],
    corretta: "Leonardo da Vinci"
  },
  {
    domanda: "In quale città è nato Napoleone Bonaparte?",
    risposte: ["Ajaccio", "Parigi", "Lione", "Marsiglia"],
    corretta: "Ajaccio"
  },
  {
    domanda: "Quale evento ha segnato la fine del Medioevo?",
    risposte: ["Scoperta dell’America", "Caduta dell’Impero Romano", "Rivoluzione Francese", "Peste Nera"],
    corretta: "Scoperta dell’America"
  },
  {
    domanda: "Chi era il presidente degli Stati Uniti durante la Guerra Civile?",
    risposte: ["Abraham Lincoln", "George Washington", "Franklin D. Roosevelt", "John Adams"],
    corretta: "Abraham Lincoln"
  },
  {
    domanda: "In che anno è caduto il Muro di Berlino?",
    risposte: ["1989", "1991", "1980", "1975"],
    corretta: "1989"
  }
];

/* selezione elementi */
const btnAnimali = document.querySelector('.b_category.animal');
const btnCinema = document.querySelector('.b_category.cinema');
const btnSport = document.querySelector('.b_category.sport');
const btnGeograf = document.querySelector('.b_category.geography');
const btnStoria = document.querySelector('.b_category.story');

const h2Domanda = document.querySelector('#quiz > h2');
const bottoniRisposta = document.querySelectorAll('#risposte > button.solution');

/* Variabile globale per tenere traccia della categoria corrente */
let categoriaCorrente = null;


/* === FUNZIONE PRINCIPALE: mostra una domanda casuale in base alla categoria === */
function mostraQuiz(categoria) {
  let listaDomande;

  // Seleziona l'array corretto in base alla categoria
  switch (categoria) {
    case 'animali':
      listaDomande = domandeAnimali;
      break;
    case 'cinema':
      listaDomande = domandeCinema;
      break;
    case 'sport':
      listaDomande = domandeSport;
      break;
    case 'geografia':
      listaDomande = domandeGeografia;
      break;
    case 'storia':
      listaDomande = domandeStoria;
      break;
    default:
      console.warn(`Categoria "${categoria}" non valida`);
      return;
  }

  // Estrai una domanda casuale dall’array
  const indice = Math.floor(Math.random() * listaDomande.length);
  const domandaCorrente = listaDomande[indice];

  // Mostra il testo della domanda
  h2Domanda.textContent = domandaCorrente.domanda;

  // Mescola l’ordine delle risposte
  const risposteMescolate = [...domandaCorrente.risposte].sort(() => Math.random() - 0.5);

  // Aggiorna i bottoni con le risposte e resetta le classi precedenti
  bottoniRisposta.forEach((btn, index) => {
    btn.textContent = risposteMescolate[index];
    btn.dataset.corretta = risposteMescolate[index] === domandaCorrente.corretta;
    btn.classList.remove('corretta', 'sbagliata');
    btn.disabled = false;
  });
}


/* === EVENTI CLICK SUI BOTTONI CATEGORIA === */
btnAnimali.addEventListener("click", () => {
  categoriaCorrente = 'animali';
  mostraQuiz(categoriaCorrente);
});
btnCinema.addEventListener("click", () => {
  categoriaCorrente = 'cinema';
  mostraQuiz(categoriaCorrente);
});
btnSport.addEventListener("click", () => {
  categoriaCorrente = 'sport';
  mostraQuiz(categoriaCorrente);
});
btnGeograf.addEventListener("click", () => {
  categoriaCorrente = 'geografia';
  mostraQuiz(categoriaCorrente);
});
btnStoria.addEventListener("click", () => {
  categoriaCorrente = 'storia';
  mostraQuiz(categoriaCorrente);
});


/* === EVENTI CLICK SULLE RISPOSTE === */
bottoniRisposta.forEach(btn => {
  btn.addEventListener("click", () => {
    if (!categoriaCorrente) return;

    // Disabilita tutti i bottoni per evitare click multipli
    bottoniRisposta.forEach(b => b.disabled = true);

    // Controlla se la risposta è corretta
    const corretta = btn.dataset.corretta === "true";
    btn.classList.add(corretta ? "corretta" : "sbagliata");

    // Dopo 0.8s mostra una nuova domanda
    setTimeout(() => {
      bottoniRisposta.forEach(b => b.classList.remove("corretta", "sbagliata"));
      mostraQuiz(categoriaCorrente);
    }, 800);
  });
});
